====== Response: XML ======

Das Rückgabeformat kann nur von FINDOLOGIC eingestellt werden.
Bei der Verwendung des XML Rückgabeformats ist folgende Dokumentation zu beachten.

===== Grundlegender Aufbau des XML Baums =====

  * ''[[#searchResult]]''
    * ''[[#servers]]''
      * ...
    * ''[[#query]]''
      * ...
    * ''[[#results]]''
      * ...
    * ''[[#products]]''
      * ''[[#product]]''
        * ...
    * ''[[#filters]]''
      * ''[[#filter]]''
        * ...
    * ''[[#landingpage]]''
    * ''[[#promotion]]''


====== Die XML Elemente im Detail ======

===== <servers/> =====

Die Server, über die die Anfrage beantwortet wurde. Das Element muss nicht immer enthalten sein.

    <servers>
      <frontend>frontend3.findologic.com</frontend>
      <backend>backend17.findologic.com</backend>
    </servers>

==== <frontend/> ====

Der Frontendserver über den die Anfrage bearbeitet wurde.

==== <backend/> ====

Der Backendserver über den die Anfrage bearbeitet wurde.

===== <query/> =====

Beschreibt die aktuell durchgeführte Suchanfrage.

    <query>
      <limit first="0" count="10"/>
      <queryString>Test</queryString>
      <searchedWordCount>1</searchedWordCount>
      <foundWordCount>1</foundWordCount>
    </query>

==== <limit/> ====

Gibt an, welcher Bereich der Ergebnisse angefordert wurde.

**Attribute:**

  * ''first''
    * gibt das erste anzuzeigende Element an ((0-basiert, d.h. wenn das erste Argument angezeigt wird, ist der Wert 0))
  * ''count''
    * gibt die Gesamtzahl der anzuzeigenden Elemente an

==== <searchedWordCount/> ====

Gibt die Anzahl der gesuchten Worte aus der Suchanfrage an.

==== <foundWordCount/> ====

Gibt die Anzahl der gefundenen Worte aus der Suchanfrage an.
Konnten nicht für die komplette Suchanfrage Ergebnisse gefunden werden, so ist **''<foundWordCount/>''** entsprechend auf die Anzahl der Worte reduziert, für die Ergebnisse gefunden werden konnten. ((''foundWordCount'' ist derzeit noch ohne Funktion))

===== <results/> =====

Gibt Informationen zu der Ergebnismenge an.

  <results>
    <count>2</count>
  </results>

==== <count/> ====

Gibt die Anzahl der Ergebnisse zur aktuellen Suchanfrage an.

===== <products/> =====

Gibt die Ergebnismenge der gefundenen Produkte aus. Entsprechend der ''<first/>''- und ''<count/>''-Werte ist dies möglicherweise nur ein Teilbereich der gesamten Ergebnismenge.

  <products>
    <product id="666" direct="1"/>
    <product id="123" direct="2"/>
  </products>

==== <product/> ====

    <product id="123" direct="2">
      <properties>
        ...
      </properties>
    </product>

**Attribute:**
  * ''id''
    * gibt die im Export übermittelte ID des jeweiligen Produktes an.
  * ''direct''
    * Dieser Parameter wird aus legacy Gründen weiterhin ausgeliefert, ist aber stets "0".


=== <properties/> ===

      <properties>
        <property name="propertyName">propertyValue2</property>
      </properties>

== <property/> ==

Gibt den Inhalt einer [[fl:csv_format_2_0#optionale_weitere_spalten|optionalen Export-Spalte]] an.

**Attribute:**
  * ''name''
    * Gibt den Namen der exportierten Spalte an.

===== <filters/> =====

Gibt die vom Suchservice aufgrund der gefundenen Ergebnisse sinnvollen weiteren Filtermöglichkeiten an.
Dabei werden die Filter in den ''<filter/>''-Elementen nach Kategorien gruppiert.

  <filters>
    <filter>
        ...
    </filter>
  </filters>

==== <filter/> ====

Gibt eine Filterkategorie an und enthält in den ''<items/>'' Elementen die verschiedenen Werte für diese Filterkategorie.

    <filter>
      <name>cat</name>
      <display>Kategorie</display>
      <select>multiselect</select>
      <selectedItems>1</selectedItems>
      <type>label</type>
      <items>
        ...
      </items>
    </filter>

=== <name/> ===

Der an FINDOLOGIC zu übermittelnde Schlüssel für dieses Attribut.

=== <display/> ===

Falls angegeben der anzuzeigende Name dieses Filters, ansonsten wird der Wert aus ''<name/>'' ausgegeben.

=== <select/> ===

Gibt den Auswahlmodus an.

Mögliche Werte:

  * ''single''
    * Es kann nur ein Wert bzw. Wertepaar für den Filter angegeben werden
    * Beispiel: Preisfilter
  * ''multiselect''
    * Es können mehrere Werte für einen Filter angegeben werden
    * Diese werden **oder**-verknüpft. 
    * Beispiel: Herstellerfilter
  * ''multiple''
    * Es können mehrere Werte für einen Filter angegeben werden
    * Diese werden **und**-verknüpft. 
    * Beispiel: Farbfilter

=== <selectedItems/> ===

Gibt an wie viele items (Werte) ausgewählt wurden. Wird nur bei ''select'' = ''multiselect'' ausgegeben.

=== <type/> ===

Gibt die Darstellungsform des Filters an:

Mögliche Werte:

  * ''label''
    * Die Filterwerte sollen in Textform dargestellt werden.
  * ''color''
    * Der Filter soll als "Color-Picker" dargestellt werden.
  * ''image''
    * Die Filterwerte sollen in Bildform dargestellt werden.
  * ''range-slider''
    * Die Filterwerte sollen mit einem Bereichsslider dargestellt werden.

=== <attributes/> ===

Gibt genauere Informationen zum Bereichsslider an.
Wird nur bei ''type'' = ''range-slider'' ausgegeben.

  <attributes>
    <selectedRange>
      <min>24</min>
      <max>27</max>
    </selectedRange>
    <totalRange>
      <min>21</min>
      <max>29</max>
    </totalRange>
    <stepSize>1</stepSize>
    <unit>Zoll</unit>
  </attributes>

== <selectedRange> ==
Gibt den vom Benutzer ausgewählten Bereich an. Wurde der Bereich noch nicht eingeschränkt sind die Werte von ''selectedRange'' und ''totalRange'' gleich.

  * <min/>
    * Ausgewählter Minimum-wert
  * <max/>
    * Ausgewählter Maximum-wert

== <totalRange> ==
Gibt den gesamten möglichen Bereich an.

  * <min/>
    * Minimal möglicher Wert des Sliders
  * <max/>
    * Maximal möglicher Wert des Sliders

== <stepSize> ==
Gibt die Größe der Schritte zwischen auswählbaren Werten an. Die Schrittgröße kann auch kleiner 1 sein.

== <unit> ==
Gibt die Einheit der Werte an.

=== <items/> ===

      <items>
        <item>
           ...
        </item>
        <item>
           ...
        </item>
      </items>

Enthält die einzelnen Werte für diese Filterkategorie.

=== <item/> ===

Enthält weitere Informationen zu diesem konkreten Filter.

    <item>
      <name>Untergruppe</name>
      <display>Untergruppe</display>
      <weight>0.863121</weight>
      <frequency>5</frequency>
      <color>#000000</color>
      <image>http://www.example.com/images/Untergruppe.jpg</image>
      <items>
        <item>
          <name>Unteruntergruppe</name>
          <weight>0.985228</weight>
          <frequency>4</frequency>
            <items>
               ...
            </items>
       </items>
    </item>

''<item/>''-Elemente können wiederum weitere ''<items/>'' enthalten.
Dies ist zum Beispiel bei hierarchischen Kategorien der Fall, bei denen eine Kategorie weitere Unterkategorien enthält.

== <name/> ==

Der an FINDOLOGIC zu übermittelnde Wert für dieses Attribut

== <display/> ==

Falls angegeben der anzuzeigende Name dieses Filter-Werts, ansonsten wird der Wert aus ''<name/>'' ausgegeben

== <weight/> ==

Die Relevanz des Filters((zwischen 0 und 1; bei 0 erfolgt keine weitere Filterung, da der Filter für alle aktuellen Ergebnisse zutrifft; 1 ist die maximale Relevanz, dieser Filter trifft auf 50% der Ergebnisse zu)), im Fall der XML-Rückgabe für die FINDOLOGIC-Navigation hat dieser Wert keine Aussagekraft und sollte daher bei der Ausgabe der Filter ignoriert werden.

== <frequency/> ==

Die Anzahl der Ergebnisse für diesen Filter((Falls laut ''<count/>'' mind. 32767 Ergebnisse gefunden wurden, ist dieser Wert nur angenähert))
Das Element ist optional und wird in bestimmten Fällen nicht ausgegeben.

== <select/> ==

Gibt an, ob mehrere Werte aus einer Filterkategorie gleichzeitig ausgewählt werden können (''multiple'') oder ob nur jeweils ein Wert dieses Filters aktiv sein darf (''single'').

== <image/> ==

Je nach Konfiguration kann eine Bild-URL pro Filter-Element zurückgeliefert werden, dieses kann in den Ergebnissen anstelle des Filternamens angezeigt werden. Die Angabe der Bild-URL heißt dabei nicht zwangsläufig, dass das Bild auch existieren muss!
Dieses Element kann auch bei Farbfiltern verwendet werden.

== <color/> ==

Handelt es sich um einen Farbfilter und ist für die entsprechende Farbe ein HTML Farbwert hinterlegt wird dieser (inklusive voranstehendem Hash) in diesem Element angegeben. Dementsprechend ist dieser Wert optional.

== <parameters/> ==

Bei bestimmten Filtern werden optional die an den Suchservice zu übermittelnden Werte angegeben, s. dazu auch [[fl:search_request_2_0#Request Parameter]].

===== <landingpage/> =====

Gibt an, dass zum Suchwort eine Landingpage gefunden wurde (z.B. für AGB oder Impressum).

  <landingPage link="http://www.example.com/legal_information" />

Wurde eine Landingpage gefunden, können die ''results'' und ''products'' Elemente leer sein.

**Attribute:**
  * ''link''
    * Enthält die URL auf die direkt weitergeleitet werden soll.



===== <promotion/> =====

Gibt an, dass zum Suchwort eine Promotion gefunden wurden (z.B. für spezielle saisonale Aktionen oder Sonderverkäufe).

  <promotion image="http://www.example.com/images/special-offer.jpg" link="http://www.example.com/special-offer" />

Das Modul sollte dann eine Möglichkeit bereitstellen, das verlinkte Bild im Suchtemplate einzubinden.\\
Standardmäßig wird dieser Banner über den Suchergebnissen ausgegeben.

**Attribute:**
  * ''image''
    * Enthält die URL zu dem Bild, das als Banner ausgegeben werden soll.
  * ''link''
    * Enthält die URL mit welcher der Banner verlinkt werden soll.

====== Beispiel ======

Folgendes Beispiel ist fiktiv und enthält alle möglichen Elemente auf einmal.

  <searchResult>
    <servers>
      <frontend>frontend.findologic.com</frontend>
      <backend>frontend.findologic.com</backend>
    </servers>
    <query>
      <limit first="0" count="10"/>
      <queryString>Test</queryString>
      <searchedWordCount>1</searchedWordCount>
      <foundWordCount>1</foundWordCount>
    </query>
    <landingPage link="http://www.example.com/imprint" />
    <promotion image="http://www.example.com/special-offer.jpg" link="http://www.example.com/special-offer" />
    <results>
      <count>2</count>
    </results>
    <products>
      <product id="666" direct="1"/>
        <properties>
          <property name="propertyName">propertyValue1</property>
        </properties>
      <product id="123" direct="2"/>
        <properties>
          <property name="propertyName">propertyValue2</property>
        </properties>
    </products>
    <filters>
      <filter>
        <name>cat</name>
        <display>Kategorie</display>
        <select>multiple</select>
        <items>
          <item>
            <name>Untergruppe</name>
            <display>Untergruppe</display>
            <weight>0.863121</weight>
            <frequency>5</frequency>
            <image>http://www.example.com/images/Untergruppe.jpg</image>
            <items>
              <item>
                <name>Unteruntergruppe</name>
                <weight>0.985228</weight>
                <frequency>4</frequency>
                  <items>
                     ...
      </filter>
      <filter>
        <name>vendor</name>
        <display>Hersteller</display>
        <select>multiple</select>
        <items>
          <item>
            <name>Firma Müller</name>
            <weight>0.863121</weight>
            <frequency>2</frequency>
            <image>http://www.example.com/vendor/firma_muller.jpg</image>
          </item>
      </filter>
      <filter>
        <select>single</select>
        <name>price</name>
        <display>Preis</display>
        <items>
          <item>
            <name>1.23 - 6.66</name>
            <weight>0.863121</weight>
            <frequency>2</frequency>
            <parameters>
              <min>1.23</min>
              <max>6.66</min>
            </parameters>
          </item>
          <item>
            <name>6.66 - 8</name>
            <weight>0.591673</weight>
            <frequency>1</frequency>
            <parameters>
              <min>6.66</min>
              <max>8</min>
            </parameters>
          </item>
        </items>
      </filter>
    </filters>
  </searchResult>

====== Weiterführende Dokumentation ======

  * Allgemeines
    * [[fl:integration:eigenes_sonstiges|Übersicht]]
    * [[fl:integration:checklist_modul|Checklist]]
  * Export
    * [[fl:integration:export|Export Dokumentation]]
    * [[fl:csv_format_2_0|CSV Formatbeschreibung]]
  * Request
    * [[fl:integration:request|Dokumentation des Requests]]
  * Rückgabe
    * [[fl:integration:response:xml|Beschreibung des XML Formats]]
    * [[fl:integration:response:html|Dokumentation der HTML Rückgabe]]
    * [[fl:template_manager_2_0|Beschreibung der Templates]]
  * Smart Suggest 
    * [[fl:integration:smart_suggest|Einbindung der Smart Suggest]]
  * Navigation
    * [[fl:navigation|Implementierungsanleitung der Navigation]]