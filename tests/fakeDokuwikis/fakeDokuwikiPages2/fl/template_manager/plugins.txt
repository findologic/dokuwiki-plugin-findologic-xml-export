=====Template-Plugins=====

Mit dem neuen Template (html2a.tpl bzw. plenty2.tpl) benötigen Sie kaum Kenntnisse von Smarty oder PHP um die Suchergebnisse wunschgerecht anzupassen.

FINDOLOGIC ermöglicht Ihnen dies durch Einsatz von Smartyfunktionen die mit wenigen Parametern zu den gewünschten Ergebnissen führen.

Sie können weiterhin wie gewohnt auch direkt auf die Smartyvariablen zugreifen, die Dokumentation hierfür finden Sie unter [[https://secure.findologic.com/dokuwiki/doku.php?id=fl:template_manager_2_0#variablen_fuer_alle_templates|Template Manager 2.0]].

Die Neuerung ist nun die Verwendung folgender derzeit implementierter Funktionen:

^ Name ^ Beschreibung ^
|logo | Bindet das FINDOLOGIC-Logo im gewünschten Farbschema ein |
|chosen_filters | Fügt die derzeit vom Benutzer ausgewählten Filter an |
|filter | Fügt den Parametern entsprechende die Filtermöglichkeiten ein |
|not_found | Gibt die gewünschte Rückmeldung aus, wenn keine Produkte gefunden wurden |
|paginator | Gibt Links zur Navigation aus |
|relevance | Gibt eine Warnung für zu geringe Relevanz aus |
|results | Zeigt die gefunden Produkte an |
|sort | Ermöglicht die Sortierung der Ergebnisse |
|generated_filters| Gibt die im Kundenbereich konfigurierten Filter aus|

===Syntax===

Der Zugriff auf Smarty erfolgt immer durch die Verwendung von geschwungenen klammern "{ }".

Zugriff auf **Variablen**: ''{$VARIABLENNAME}'' bzw. ''{$ARRAYNAME.ELEMENTNAME}''\\
Aufruf von **Funktionen**: ''{funktionsname parameter_1="wert" parameter_2="wert"}''\\


====== Die Funktionen im Detail ======

Alle Parameter sind optional, jedoch für sinnvolle Ergebnisse teilweise notwendig (zum Beispiel für die Funktion "filter").

===== logo =====

Beispiel:
<code>
{logo color="red-grey-transparent"}
</code>

==== Logo deutsch ====
^ Parameter ^ Wert ^ Output ^
| "parameterlos" | |{{:fl:findologic_claimer_german.png}} |
| color | findologic_logo_neg_orange_hg_de.png | {{:fl:findologic_logo_neg_orange_hg_de.png}} |
| color | findologic_logo_neg_grau_hg_de.png | {{:fl:findologic_logo_neg_grau_hg_de.png}} |
| color | findologic_logo_neg_schwarz_hg_de.png | {{:fl:findologic_logo_neg_schwarz_hg_de.png}} |
^ Transparent ^ ^ ^
| color | findologic_logo_neg_orange_transparent_de.png | {{:fl:findologic_logo_neg_orange_transparent_de.png}} |
| color | findologic_logo_neg_grau_transparent_de.png | {{:fl:findologic_logo_neg_grau_transparent_de.png}} |
| color | findologic_logo_neg_schwarz_transparent_de.png | {{:fl:findologic_logo_neg_schwarz_transparent_de.png}} |
^ Für Webseiten mit dunklem Hintergrund ^ ^ ^
| color | findologic_logo_neg_weiss_de_darstellung.png | {{:fl:findologic_logo_neg_weiss_de_darstellung.png}} |
| color | findologic_logo_neg_weiss_transparent_de.png | {{:fl:findologic_logo_neg_weiss_transparent_de.png}}((Sollten Sie hier nichts sehen, dann liegt das nicht an Ihrer Brille, sondern daran, dass sich hier ein weißes Logo auf weißem Hintergrund versteckt)) |

==== Logo english ====
^ Parameter ^ Value ^ Output ^
| "no parameter" | |{{:fl:findologic_claimer_german.png}} |
| color | findologic_logo_neg_orange_hg_en.png | {{:fl:findologic_logo_neg_orange_hg_en.png}} |
| color | findologic_logo_neg_grau_hg_en.png | {{:fl:findologic_logo_neg_grau_hg_en.png}} |
| color | findologic_logo_neg_schwarz_hg_en.png | {{:fl:findologic_logo_neg_schwarz_hg_en.png}} |
^ Transparent ^ ^ ^
| color | findologic_logo_neg_orange_transparent_en.png | {{:fl:findologic_logo_neg_orange_transparent_en.png}} |
| color | findologic_logo_neg_grau_transparent_en.png | {{:fl:findologic_logo_neg_grau_transparent_en.png}} |
| color | findologic_logo_neg_schwarz_transparent_en.png | {{:fl:findologic_logo_neg_schwarz_transparent_en.png}} |
^ For websites with dark background ^ ^ ^
| color | findologic_logo_neg_weiss_en_darstellung.png | {{:fl:findologic_logo_neg_weiss_en_darstellung.png}} |
| color | findologic_logo_neg_weiss_transparent_en.png | {{:fl:findologic_logo_neg_weiss_transparent_en.png}}((If you see nothing here your eyes work great, but a white logo on white background is invisible)) |

==== Logo russian==== 
^ Parameter ^ Value ^ Output ^
| "no parameter" | |{{:fl:findologic_claimer_german.png}} |
| color | findologic_logo_neg_orange_hg_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_orange_hg_ru.png}} |
| color | findologic_logo_neg_grau_hg_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_grau_hg_ru.png}} |
| color | findologic_logo_neg_schwarz_hg_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_schwarz_hg_ru.png}} |
^ Transparent ^ ^ ^
| color | findologic_logo_neg_orange_transparent_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_orange_transparent_ru.png}} |
| color | findologic_logo_neg_grau_transparent_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_grau_transparent_ru.png}} |
| color | findologic_logo_neg_schwarz_transparent_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_schwarz_transparent_ru.png}} |
^ For websites with dark background ^ ^ ^
| color | findologic_logo_neg_weiss_ru_darstellung.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_weiss_ru_darstellung.png}} |
| color | findologic_logo_neg_weiss_transparent_ru.png | {{https://secure.findologic.com/www/images/findologic_logo_neg_weiss_transparent_ru.png}}((If you see nothing here your eyes work great, but a white logo on white background is invisible)) |


===== chosen_filters=====

Beispiele:

<code>
{chosen_filters}
{chosen_filters name="Farbe" remove_label="kick it"}
{chosen_filters remove_all_only="1" remove_all_label="Macht doch bitte wieder die Filter weg"}
</code>
^ Parameter ^ Wert ^ Beschreibung ^ Default ^
| "parameterlos" | | Liefert alle gewählten Filter als Link zur Entfernung jener | |
| name | cat | Liefert alle gewählten Kategorie-Filter als Link zur Entfernung jener | |
| name | vendor | Liefert alle gewählten Hersteller-Filter als Link zur Entfernung jener | |
| name | price | Liefert alle gewählten Preis-Filter als Link zur Entfernung jener | |
| name | //Attributsname// | Liefert alle gewählten Attributs-Filter als Link zur Entfernung jener | |
| removeable | 0 | Liefert die gewählten Filter als Text nicht als Link zur Entfernung |1|
| remove_label | //String// | Der übergebene Wert wird dem Link als //title// übergeben (erscheint bei onMouseOver) |"Filter entfernen"|
| remove_all | 0 | Wird verwendet um den Link "Alle Filter entfernen" nicht anzuzeigen |1|
| remove_all_label | //String// | Der übergebene Wert wird als Text für den "Alle Filter entfernen"-Link übernommen |"Alle Filter entfernen"|
| remove_all_only | 1 | Es wird nur der Link zur Entfernung aller Filter angezeigt |0|
| currency | | Währung, die beim gewählten Preisfilter angezeigt werden soll | € |
| <Filtername> | gewünschter Titel | Titel, der für einen gewählten Filterkategorie angezeigt werden soll((''Hersteller="Marke"'' zeigt für gewählte Filter der Kategorie "Hersteller" den Titel "Marke" an; mehrere aufeinanderfolgende Sonderzeichen werden durch _ (Unterstrich) ersetzt: ''Dies_Das="Sonstiges"'' zeigt für gewählte Filter der Kategorie "Dies & Das" den Titel "Sonstiges" an)) | "Hersteller" für "vendor", "Kategorie" für "cat", ansonsten wird der Titel der Filterkategorie direkt übernommen |

===== filter =====

Beispiele:

<code>
{filter name="cat"}
{filter name="Farbe" type="color-picker"}
{filter name="price" type="range-slider"}
</code>

^ Parameter ^ Wert ^ Beschreibung ^ Default ^
| "parameterlos" | | Liefert eine leere Box, zumindest der Parameter "name" ist notwendig um eine sinnvolle Anzeige zu ermöglichen | |
| name | cat | Liefert alle wählbaren Kategorie-Filter | |
| name | vendor | Liefert alle wählbaren Hersteller-Filter| |
| name | price | Liefert alle wählbaren Preis-Filter. [[#Darstellung der Preise mittels Slider|Als Slider möglich]]| |
| name | //Attributsname// | Liefert alle wählbaren Attributs-Filter| |
| type | color-picker | Setzt vor den Namen der auswählbaren Farben symbolisch die auswählbare Farbe ([[fl:farbfilter|erfahren Sie mehr]])| Filternamenanzeige |
| type | select | Zeigt die Filter in einem Drop-Down Feld an | Filternamenanzeige |
| limit | //Integer// | Setzt die Maximalanzahl der anzuzeigenden Filter | "Endlos" |
| offset | //Integer// | Setzt die Position des ersten anzuzeigenden Filters | 0 |
| action_url | //String// | Gibt ein absolutes Pfadprefix vor | |
| show_frequency | 0 oder 1 | Die Anzahl der zugehörigen Treffer wird nicht angezeigt | 1((Beim Price-Filter: 0)) |
| not_found | //String// | Der übergebene Wert wird angezeigt wenn keine weiteren Filter gefunden wurden| Keine weiteren Filter vorhanden |
| sort | //String// | ''relevance'' => nach Relevanz sortieren, ''count'' => Nach Anzahl Ergebnissen sortieren, ''numeric'' => Numerisch sortieren((sinnvoll für Größenangaben, so dass 38 vor 100 kommt)) | Alphabetisch |
| currency | //String// | Die Währungseinheit (nur beim Preisfilter sinnvoll) | € |
| separator | //String// | Das Dezimal-Trennzeichen für Preise (nur beim Preisfilter sinnvoll) | , |

==== Darstellung mit Dropdown-Menü ====

Sollte Ihnen die ehemalige Darstellung des Templates schon ans Herz gewachsen sein, können Sie diese beispielsweise wie folgt nachbauen:

<code smarty>
{filter name="vendor" limit="5"}
{filter name="vendor" offset="5" type="select" not_found=""}
</code>

Bei Bedarf kann so ein leeres erstes Auswahlmöglichkeit hinzugefügt werden: 
<code javascript>
<script>
	jQuery(".flSelectorBox select").prepend('<option value="#">Bitte wählen</option>');
	jQuery('#flMainFilterBalken select option[value=#]').attr('selected','selected');
</script>
</code>

==== Darstellung der Preise mittels Slider ====


Für die Preisbereiche ist eine Anzeige mittels Slider möglich. Dies wird über den ''type="range-slider"'' unterstützt.
<code>
{filter name="price" type="range-slider"}
</code>

==== Anzeige der Herstellerlogos ====

Wenn Sie im Hersteller-Filter neben dem Namen auch das entsprechende Hersteller-Logo anzeigen lassen wollen, können Sie dies einfach und schnell realisieren: [[https://secure.findologic.com/dokuwiki/doku.php?id=fl:modul:herstellerlogos|Herstellerlogos anzeigen]]

==== Einzelne Filter konfigurieren / Filter ohne weitere Filtermöglichkeiten ausblenden ====

Wenn Sie für einzelne Filter Werte (z.B. die Sortierung) festelegen wollen, fügen Sie folgenden Code für die Darstellung des Filters (in diesem Fall "Größe") ein. Auf diese Weise können Sie auch Filter ausblenden, für die keine weiteren Filtermöglichkeiten vorhanden sind. 

<code>
{assign var="filter" value="Größe"}
{if $FILTERS.$filter.filters}
<div class="flFilterBox">
	<strong style="font-size:12px;">{$filter}</strong>
	<div class="flFilterBoxFilters">{filter name="Größe" sort="numeric"}</div>
</div>
{/if}
</code>

==== Einzelne Filter ausblenden ====

Wenn Sie einzelne Filter nicht anzeigen wollen, fügen Sie folgenden Code ein:

<code>
{assign var="filter" value="Größe"}
{if $FILTERS.$filter.filters}
	<!-- {filter name="Größe"} -->
{/if}
</code>

==== Einzelne Filter nur unter bestimmten Bedingungen einblenden ====
Um einen Filter nur anzuzeigen, wenn z.B. ein bestimmter GET-Parameter gesetzt ist (''&test=true''), fügen Sie folgenden Code ein:
<code>
{if $smarty.get.test==true}
{filter name="Größe"}
{/if}
</code>

==== Filter abhängig von der Kategorie anzeigen ====
Wenn Sie Filter nur anzeigen wollen, wenn eine bestimmte Kategorie ausgewählt ist, dann können Sie dies so umsetzen:

<code>
{if $PARAMETER.attrib.cat[0]=="Kategorie_Pfad"}
{filter name="Spezialfilter"}
{/if}
</code>

==== Reihenfolge der Filter ====

Standardmäßig werden in den Templates die Filter für Kategorie, Hersteller und Preisbereich immer angezeigt. Weitere Filter werden je nach Vorhandensein und Relevanz im Weiteren angezeigt:

<code html>
		<div id="flMainFilters">
			<div class="flFilterBox">
				<strong style="font-size:12px;">Kategorie</strong>
				<div class="flFilterBoxFilters">{filter name="cat"}</div>
			</div>
			 
			<div class="flFilterBox">
				<strong style="font-size:12px;">Hersteller</strong>
				<div class="flFilterBoxFilters">{filter name="vendor"}</div>
			</div>
					
			<div class="flFilterBox">
				<strong style="font-size:12px;">Preisbereich</strong>
				<div class="flFilterBoxFilters">{filter name="price"}</div>
			</div>
		</div>
		
{if $MORE_FILTERS_COUNT > 0}
		<div id="flExpandMoreFilters"><a href="#">Weitere Filter</a></div>

		<div id="flMoreFilters" style="display: none;">
	{foreach from=$FILTERS key=category item=categoryFilters name=categories}
			<div class="flFilterBox">
				<strong style="font-size:12px;">{$categoryFilters.name}</strong>
				<div class="flFilterBoxFilters">{filter name=$category}</div>
			</div>
	{/foreach}
		</div>
{/if}
</code>

Wollen Sie bestimmte Filter immer darstellen, fügen Sie entsprechend einen Eintrag für diesen Filter im Template ein. Am Beispiel eines Filters für das Attribut "Farbe":

<code html>
...

			<div class="flFilterBox">
				<strong style="font-size:12px;">Preisbereich</strong>
				<div class="flFilterBoxFilters">{filter name="price"}</div>
			</div>

			<div class="flFilterBox">
				<strong style="font-size:12px;">Farbe</strong>
				<div class="flFilterBoxFilters">{filter name="farbe"}</div>
			</div>

...
</code>

===== not_found =====

Beispiele:

<code>
{not_found}
{not_found message="Es wurden keine passenden Ergebnisse gefunden. Gerne helfen wir Ihnen telefonisch unter 123/456 oder per Email unter <a href='mailto:support@xy.com'>support@xy.com</a> weiter!"}
{not_found message="<script type='text/javascript'>window.location = 'http://www.shop.de/no-result.html';</script>"}
</code>

^ Parameter ^ Wert ^ Beschreibung ^ Default ^
| "parameterlos" | | Liefert die Rückmeldung "Es wurden keine Produkte gefunden" | |
| message | //String// | Der übergebene Wert wird angezeigt wenn keine Produkte gefunden wurden | Es wurden keine Produkte gefunden |

<note important>Wenn in der not_found-Message Anführungsstriche verwendet werden (z.B. bei einem Link), sind hier **einfache Anführungsstriche** notwendig (siehe Codebeispiel oben)!</note>

===== paginator =====

Beispiele:

<code>
{paginator}
{paginator type="pageSize" sizes="10|20|50|100"}
</code>

^ Parameter ^ Wert ^ Beschreibung ^ Default ^
| "parameterlos" | | Zeigt den Paginator mit den voreingestellten Produktanzahlen an. | |
| type | pageSize | Forciert den Paginator mit den **mitübergebenen** Produktanzahlen anzuzeigen. | |
| sizes | //Int//<nowiki>|</nowiki>//Int//<nowiki>|</nowiki>//Int//<nowiki>|</nowiki>//Int// | Die eingefügten Zahlen werden zur Auswahl gestellt | |
| label | //String// | Dient der Beschreibung des Auswahl-Selects | <nowiki>''</nowiki> |

Wenn Sie type="pageSize" verwenden ist die Angabe der entsprechenden "sizes" notwendig!\\
Beachten Sie, dass das label nur bei der Angabe type="pageSize" berücksichtigt wird.

===== results =====

Beispiele:

<code>
{results type="plenty"}
{results items="Artikelnummer: %ORDERNUMBER%|%TITLE%|%IMAGE%|<span class='preis'>%PRICE%&euro;</span>|inkl. %TAX_RATE% %PERCENT% Ust." cols="4" price_from="ab" show_overridden_price="1" img_width="100" img_height="100"}
</code>


^ Parameter ^ Wert ^ Beschreibung ^
| type | ''plenty'', ''websale'', ''id'' | Wollen Sie nur die ID's der Produkte ausgeben wählen Sie entsprechend einen "type". (Default: items)|
| items | //String// | Wird in folgender Tabelle geklärt. |
| cols | //Int// | Anzahl der Zeilen der Ergebnisse |
| price_from | //String// | Prefix für "ab"-Preise |
| show_overridden_price | //Bool// | Sollte es sich um einen "statt"-Preis handeln wird er mit einer "1" angezeigt. |
| img_width | //Int// | Maximale Bildbreite | 
| img_height | //Int// | Maximale Bildhöhe | 
| img_url | //String// | Festlegung für ein Prefix für alle Image-URLs | 

Mit der Angabe des Parameters "items" gestallten Sie individuell das einzelne Ergebnis.
Hierfür wird der übergebene String aufgesplittet nach "<nowiki>|</nowiki>" und Bezeichner innerhalb des %-Zeichens aufgelöst.

Mögliche Bezeichner:

^ Bezeichner ^ Beschreibung ^
| ORDERNUMBER | Artikelnummer |
| TITLE | Inhalt des Titels|
| IMAGE | Bild-URL |
| URL | URL der Artikel-Detailseite |
| PRICE | Preis |
| TAX_RATE | Steuersatz|
| SUMMARY | Inhalt der Zusammenfassung|
| PERCENT | % Zeichen |

==== Ausgabe von IDs ====

Es gibt auch die Möglichkeit, lediglich die IDs der Ergebnisse im Template auszugeben. Die Darstellung wird dann vom Shopsystem übernommen, so ist garantiert dass die Artikeldarstellung in Navigation und Suche konsistent ist:

<code>{results type="id"}</code>

Beispielhafte Ausgabe:
<code html>
<flProductID>896</flProductID>
<flProductID>898</flProductID>
<flProductID>984</flProductID>
</code>

Weiterhin können auch andere Werte aus den Produktinformationen ausgegeben werden. In diesem Fall wird der Wert ''PROPERTIES.plenty_id'' im Tag ''PLENTY_ID'' ausgegeben, aufgrund von ''unique="1"'' wird jede ID wird genau einmal ausgegeben:

<code>{results type="id" tag="PLENTY_ID" value="PROPERTIES.plenty_id" unique="1"}</code>

Die Ausgabe ist dann in etwa:

<code><PLENTY_ID>1</PLENTY_ID><PLENTY_ID>2</PLENTY_ID></code>

===== sort =====

Beispiele:
<code>
{sort}
</code>

Dies fügt automatisch eine Combo-Box mit Auswahlmöglichkeiten zur Sortierung hinzu. Dieses Plugin bietet keine Optionen.

===== generated_filters =====

Dieses Plugin gibt die im Kundenbereich konfigurierten Filter aus. 
<note important>Bitte beachten Sie, dass dieses Feature noch  nicht alle Darstellungs-Optionen unterstützt</note>

{{:fl:template_manager:filter2.jpg?direct|Filterkonfiguration}}

Sie erreichen die [[https://secure.findologic.com/login/index.php?page=filters|Filterkonfiguration]] im Kundenbereich unter Einstellungen -> Filterkonfiguration.

 ==== Einbau in das Template ====

<note important>Um die manuell konfigurierten Filter auch tatsächlich im Template anzuzeigen ist folgende Anpassung notwendig.</note>

Um die konfigurierten Filter auszugeben, bauen sie folgenden Code an geeigneter Stelle ein:

<code smarty>
{generated_filters}
</code>

=== Umstellung bei alten Templates  ===

Sollte in Ihrem Template das ''generated_filter'' Plugin noch nicht verwendet werden, führen Sie bitte folgende Schritte durch:

  - Entfernen Sie folgenden Abschnitt in ihrem Template :<code smarty>
<div id="flMainFilters">
   [...]
</div>	
{if $MORE_FILTERS_COUNT > 0}
   [...]
{/if}
</code>
  - Fügen Sie folgenden Code ein:<code smarty>
{generated_filters}
</code>